tworld / Tile World / Tile World

.section Synopsis

Tile World is a reimplementation of the game "Chip's Challenge". The
player controls Chip, navigating him through his challenges. The
object of each level of the game is to find and reach the exit tile,
which takes you to the next level. The levels contain many different
kinds of obstacles, creatures both hostile and indifferent, tools,
protective gear -- and, of course, chips.

.section Overview of the Game

The main display shows Chip in the current level and his immediate
surroundings. To the right of this display is shown the basic
information about the current level. The most important data shown
here are how many seconds are left on the clock, and how many chips
still need to be collected. (On some level the clock does not show a
time. These levels have no time limit.)

The object of every level is to find and reach the exit before the
time runs out. The exit is frequently (but not always) guarded by a
chip socket. To move past the chip socket, Chip must collect a certain
number of computer chips; the amount needed is different in each
level. As you play a level, the information display on the right shows
the number of chips that still need to be collected in order to open
the socket. (Remember that getting enough chips to open the chip
socket is only a subgoal, not the main goal. Some levels do not
require any chips to be collected; some levels have no chip socket at
all.)

Also occupying many of the levels are other creatures. Most (but not
all) of them move about in simple, predictable patterns, and without
regard for Chip's presence. The creatures know enough to avoid running
into each other, but a collision with Chip is fatal. The complete
taxonomy of creatures is: tanks, balls, gliders, fireballs, walkers,
blobs, teeth, bugs, and paramecia.

In addition to the socket and the main exit, there are also four
different kinds of doors. These doors can be opened with the right
kind of key. The doors and the keys are color-coded -- red, green,
blue, and yellow -- so you can tell them apart. Like the chip socket,
a door that has been opened stays open. Keys are picked up simply by
stepping upon them. The key disappears from the map and appears in
your possession. Keys in your possession are displayed on the
right-hand side of the window.

Besides keys and chip, there are also four kinds of special footgear
that Chip can collect. Like keys, boots can be picked up simply by
walking over them. (There is no limit to the number of boots you can
have.) These boots permit Chip to walk across four different kinds of
surfaces, just as if they were normal flooring. Fire and water are two
kind of tiles that are normally fatal to Chip, but fire boots and
water boots will permit safe passage across these. Stepping onto ice
sends Chip sliding at high speed unless he has a pair of ice boots.
Finally, there are force floors that push Chip along in a specific
direction; these can be counteracted with force boots.

Two other types of surfaces are more useful to Chip, in that they keep
other creatures out. These are dirt and gravel, and they are special
in that Chip is the only one who can walk on them. However, when Chip
steps onto a dirt tile, it is cleared away and becomes normal
flooring. Gravel, on the other hand, is permanent.

There are numerous other objects scattered around the various levels,
which Chip can interact with, although he cannot pick them up. Bombs
are one kind of object which should always be avoided, as they explode
when stepped on. The thief tile should also generally be avoided;
entering this tile will cause Chip to lose any footgear he has
collected.

Dirt blocks are large, movable squares of dirt. Chip can push them
about, and use them to wall off areas or to safely detontate bombs.
Furthermore, if a block is pushed into water, the tile will turn into
dirt (which will become normal flooring when Chip steps on it).
Finally, note that blocks can sometimes be resting on top of other
objects, both helpful (such as a key) and harmful (such as a bomb).

Some levels have teleports. Entering a teleport causes Chip to vanish
and instantaneously reappear at another teleport.

Even some of the walls can demonstrate surprising behavior. The
so-called blue walls can either be actual walls, or empty mirages.
The only way for Chip to tell which is which is to attempt to walk
through one. There are also popup walls -- Chip can walk across these
only once, for they turn into walls as he walks over them.

There are four different types of pushbuttons. Like keys and boots,
they are color-coded. Stepping on a pushbutton activates it.

The green buttons control the toggle walls. Toggle walls have dotted
green outlines, and they change between being open (passable, like any
other floor) and open (unpassable, a wall). When a green button is
pressed, the closed toggle walls are opened and the open toggle walls
are closed.

Brown buttons control bear traps. Anything that wanders into a bear
trap will be stuck there until the brown button connected to it is
pushed.

Blue buttons exercise some control over the tanks. Normally, a tank
moves directly forward until it hits an obstacle, whereupon it stops.
But when a blue button is pressed, all tanks turn around 180 degrees
and begin moving again.

The objects with the most potential for help and hindrance are the
clone machines, which are controlled by red buttons. Every clone
machine contains a dirt block, a tank, or some other creature. When
the clone machine's red button is pressed, a duplicate of whatever the
clone machine contains is created and set loose.

Once in a while there will also be hint buttons. These have a question
mark displayed on them. When Chip steps onto a hint button, a short
bit of information will be displayed in the lower right-hand area of
the window.

Here are some general hints for successful play:

.list
. When moving dirt blocks around, take care not to shove them into
corners where you can't get them out again.
. On some of the more mazelike levels, you may need to sketch out a map
in order to solve it.
. Many of the creatures move in specific patterns (for example, as with
the tanks mentioned above).
. A number of the objects in the game will affect other creatures in the
same way they affect Chip.
. Remember that if you get trapped somewhere, you can always use
<Ctrl>-<R> to restart a level.
. When you find a level to be unusually difficult, take some time to
examine it carefully. Make sure you truly know what options are
available to you. In any case, keep trying. Occasionally the game will
give you the opportunity to skip a level that seems too hard.

.section Passwords

Every level has a four-letter password. The password for a level is
shown in the information display at the upper-right of the window. The
obstensible purpose of passwords is to allow you to come back to a
level. Howver, normally you will never need to remember passwords, as
Tile World will automatically store the passwords for you. However, if
you somehow manage to learn the password of a level that you have yet
to achieve, you can use the password to gain early access to that
level.

.section Scoring

For each level in a set that you complete, the game awards 500 points
times the level's number. Furthermore, if the level is timed, an extra
10 points is added for every second left on the clock when you finish
the level. You can thus sometimes improve your score by returning to
already-completed levels and playing them again.

.section Key Commands

During game play, the arrows are the most important keys; they move
Chip through the level. The keys <2> <4> <6> <8> on the numeric keypad
can also be used for the same purpose. Other keys have the following
functions:

.table
. <Ctrl>-<H>
. pauses the game; press any key to resume play.
. <Ctrl>-<N>
. stops the current game and moves forward to the next level.
. <Ctrl>-<P>
. stops the current game and moves back to the previous level.
. <Q>
. quits the current level.
. <Ctrl>-<R>
. starts over at the beginning of the current level. 
. <?>
. pauses the game and displays a list of topics for which help is
available within the program.
. <V>
. decreases the volume level. (If the volume level is reduced to zero,
then the program will display sound effects textually, as onomatopoeia.)
. <Shift>-<V>
. increases the volume level.

At the start of a level, before game play begins, the following key
commands are available:

.table
. <Q>
. returns to the list of available level sets.
. <Spc>
. starts the current level without moving (i.e., standing still).
. <N>
. moves to the next level.
. <P>
. moves to the previous level.
. <PgUp>
. moves ahead ten levels.
. <PgDn>
. moves back ten levels.
. <G>
. displays a prompt and accepts a password, then jumps to the level with
that password.
. <Ctrl>-<I>
. plays back the best solution for that level.
. <Ctrl>-<X>
. deprecates the best solution for that level. If the level is then
succesfully completed again, the saved solution will be replaced with
the new one, whether or not it had a better time.
. <S>
. displays the list of known levels and their current scores. The score
list also permits changing the current level.
. <?>
. displays a list of topics for which help is available within the
program.

At most other points, the <Q> key will abort the current activity
and return to the start of the current level.

Finally, the program can be exited at any time by pressing either
<Ctrl>-<C> or <Alt>-<F4>.

.section Rulesets

Tile World contains emulators for two different versions of "Chip's
Challenge". They are referred to as the Lynx ruleset and the MS
ruleset. The Lynx ruleset recreates the original implementation of the
game, and the MS ruleset recreates the version that was implemented
for Microsoft Windows (cf #History#).

The most notable difference between the two rulesets is that in the MS
ruleset, movement between tiles is instantaneous, whereas under the
Lynx ruleset motion occurs across several "ticks". (This probably
reflects the fact that the latter ran on dedicated hardware, while the
former ran on 33 MHz PCs under a non-preemptive multitasking OS.)
Although the basic mechanics of the game are the same under both
rulesets, there are also a host of subtle differences between the two.

Each level set file includes a flag that indicates which ruleset it is
to be played under. Some level sets can be played under both rulesets
(most notably, the original set of levels), but this is the exception.

.section Adding New Level Sets

Level sets are defined by data files. By convention these file are
named with a <.dat> extension. Typically the name proper contains
the author's first name, last initial, and a single digit -- for
example, <EricS1.dat>. (The digit is used to give the sequence in
case the author, for whatever reason, stores their creations in more
than one file.)

When a new data file is obtained, it may simply be copied into the
level set directory (cf #Directories#), and Tile World will then make
it available for playing.

An alternate method is to use a configuration file (see #Configuration
Files# below).

.section Command-Line Options

<tworld> is normally invoked without arguments. The program begins by
displaying a list of the available level sets. After a level set is
chosen, the program jumps to the first unsolved level to begin
play. However, the name of a level set can be specified directly on
the command line, as well as the number of a level to start with.

The available command-line options are enumerated in the following
table. (Windows users: The options that cause the program to display
information on standard output actually go to a file named
<stdout.txt> instead.)

.table
. <-a>
. Double the size of the audio buffer. This option can be repeated, so
for example <-aaa> would increase the audio buffer size eightfold.
. <-D>_%DIR%
. Read level data files from %DIR% instead of the default directory.
. <-d>
. Display the default directories used by the program on standard
output, and exit.
. <-H>
. Upon exit, display a histogram of idle time on standard output. (This
option is used for evaluating optimization efforts.)
. <-h>
. Display a summary of the command-line syntax on standard output and
exit.
. <-L>_%DIR%
. Look for level sets in %DIR% instead of the default directory.
. <-l>
. Write a list of available level sets to standard output and exit.
. <-p>
. Turn off all password-checking. This option allows the normal sequence
of levels to be bypassed.
. <-q>
. Run quietly. All sounds, including the ringing of the terminal bell,
are suppressed.
. <-R>_%DIR%
. Read resource data from %DIR% instead of the default directory.
. <-S>_%DIR%
. Read and write solution files under %DIR% instead of the default
directory.
. <-s>
. Display the current scores for the selected level set on standard
output and exit. (A level set must be specified on the command line
for this option to be generally useful.)
. <-t>
. Display the best times for the selected level set on standard output
and exit. (A level set must be specified on the command line for this
option to be generally useful.)
. <-V>
. Display the program's version and license information on standard
output and exit.
. <-v>
. Display the program's version number on standard output and exit.

.section Configuration Files

Configuration files are used to override some of the settings in a
data file, or to set values not provided for by the data file format.
Configuration files are by convention named with a <.dac>
extension. A configuration file is stored in the level set directory
in the place of the data file, which then goes into the data directory
(cf #Directories#).

The configuration file is a simple text file. The first line of a
configuration file %must% have the following form:

<file = >%DATAFILE%

where %DATAFILE% is the filename of the data file. (Arbitrary
whitespace is permitted around the equal sign, but there cannot be any
whitespace embedded at the beginning of the line.) After this initial
line, the configuration file can contain any of the following lines:

<usepasswords = >%y|n%

This line permits password-checking to be enabled/disabled when
playing the levels in the set. The default is <y>.

<ruleset = >%ms|lynx%

This line allows the configuration file to override the ruleset
setting in the data file. This is mainly useful in the case where one
level set is playable under either ruleset (as is the case with the
original level set). The author can then provide one data file and two
configuration files to make both versions available.

<lastlevel = >%levelnum%

This line marks an arbitrary level as being the last level in the
set. The game will stop when this level is completed, instead of
proceeding to the next level. (Note that if the data file contains any
levels beyond this one, they will only be reachable via a password.)

<fixlynx = >%y|n%

This line is specifically for use with the original level set. It is
not generally useful, and is described here only for completeness. The
<chips.dat> file that MS distributed with their version of "Chip's
Challenge" contained a few minor differences from the original level
set as appeared on the Lynx. A positive value for this entry instructs
the program to undo those changes, so that the original Lynx level set
is obtained. (The changes made by MS were: an extra level was added;
three passwords were garbled; another password was replaced with the
password to the prior level; and, on most but not all copies, a wall
was removed from one level, presumably to alleviate its unexpected
difficulty.)

.section Resources

Tile World loads various resources at runtime from its resource
directory (cf #Directories#). These resources include the program's
font, graphic images, and sound effects. The actual file names are
determined by the contents of a file named <rc> (short for "resource
configuration", not "runtime commands") in the same directory.

The <rc> file is a plain text file, and contains lines of the
form

%resource%< = >%filename%

where %resource% is a symbolic resource name, and %filename% is the
name of a file in the resource directory.

The resources can be set differently depending on the ruleset that the
program is using. A line in the <rc> file of the form

<[>%ruleset%<]>

indicates that the lines that follow only apply when that ruleset is
in effect (where %ruleset% is either <MS> or <Lynx>). Resources that
are defined before any such line apply to both rulesets, and are also
used as fallbacks if a ruleset-specific resource could not be
loaded. (The font and the text-color resources also need to have
ruleset-independent values, as these are needed when displaying the
initial file list, before a ruleset has been chosen.)

A line of the form

<TileImages = >%FILENAME%

identifies the file that provides the images used to draw the game.
These images are stored in a Windows bitmap. (See #Appendix: Layout of
the Tile Bitmap# for more information about this resource.)

A line of the form

<Font = >%FILENAME%

identifies the file that provides the program's font. The font is
stored as a Windows bitmap. (See #Appendix: Layout of the Font Bitmap#
for more information about this resource.)

Four resources define the colors used in rendering text:

<BackgroundColor = >%RRGGBB%
.brk
<TextColor = >%RRGGBB%
.brk
<BoldTextColor = >%RRGGBB%
.brk
<DimTextColor = >%RRGGBB%

The value of %RRGGBB% is a string of six hexadecimal digits defining
the red, green, and blue values of the color (as with the color
specification used in HTML or X Windows, but without the preceding
octothorpe).

The remaining resources all define the game's sound effects. The
sounds are stored as Microsoft .wav (RIFF) files. Unlike the tile
images, each sound effect is defined as a separate file. The complete
list of symbolic resource names is as follows:

Sounds used in both rulesets
.list
. <LevelCompleteSound>
. <ChipDeathSound>
. <BlockedMoveSound>
. <PickupToolSound>
. <ThiefSound>
. <TeleportSound>
. <OpenDoorSound>
. <SocketSound>
. <SwitchSound>
. <BombSound>
. <SplashSound>

Sounds used only under the MS ruleset
.list
. <TickSound>
. <ChipDeathByTimeSound>
. <PickupChipSound>

Sounds used only under the Lynx ruleset
.list
. <TileEmptiedSound>
. <WallCreatedSound>
. <TrapEnteredSound>
. <BlockMovingSound>
. <SkatingForwardSound>
. <SkatingTurnSound>
. <SlidingSound>
. <SlideWalkingSound>
. <IceWalkingSound>
. <WaterWalkingSound>
. <FireWalkingSound>

(Note that the symbolic names for the shared and MS-only sounds match
the names in the <entpack.ini> file used by the Microsoft
program. This makes it easy for someone with a copy of Microsoft's
"Chip's Challenge" to use the sound effects that were provided with
that version of the game.)

.section Directories

Tile World uses four different directories for storing external files.
The following list enumerates the directories and describes their
purpose. The default directories that the program uses can be
configured at compile time. The directories can also be changed at
runtime via command-line options and/or environment variables (see
above).

.table
. Sets
. This directory is used to hold the available level sets. The files
in this directory are either data files or configuration
files. (default for Linux: </usr/local/share/tworld/sets>)
. Data
. This directory is used to hold the data files that are referenced by
configuration files. (default for Linux:
</usr/local/share/tworld/data>)
. Res
. This directory stores the graphics and sound files used by the
program. (default for Linux: </usr/local/share/tworld/res>)
. Save
. This directory is used for saving solution files. (default for
Linux: <~/.tworld>)

.section Environment Variables

Two environment variables can be used to override the program's
built-in defaults for which directories to use. They are as follows:

.table
. <TWORLDDIR>
. Specifies a top-level directory, in which the program will look for
the resource, level set, and data file directories.
. <TWORLDSAVEDIR>
. Specifies a directory for saving solution files.

.section License

Tile World is copyright (C) 2001, 2002 by Brian Raiter.

This program is free software; you can redistribute it and/or  
modify it under the terms of the GNU General Public License as 
published by the Free Software Foundation; either version 2 of 
the License, or (at your option) any later version.            

This program is distributed in the hope that it will be useful, but
!without any warranty!; without even the implied warranty of
!merchantability! or !fitness for a particular purpose!. See the GNU
General Public License for more details.

Please send bug reports to breadbox@muppetlabs.com.

.section History

"Chip's Challenge" was created by Chuck Sommerville, and was
originally written for the Atari Lynx handheld game console. ("Tile
World" was his working title for the game.) "Chip's Challenge" was
published by Epyx (the company who designed the Lynx before selling
the rights to Atari) in 1989, and was among the first set of games
made available for the Lynx.

"Chip's Challenge" was subsequently ported to several other platforms:
MS-DOS, Microsoft Windows, Amiga, and the Commodore 64. (A NES port
was also planned, but never completed.) The most well-known port was
the Windows version, done by Microsoft and sold as part of Windows
Entertainment Pack 4 (and later as part of Best of Windows
Entertainment Pack).

In the process of recreating the game for the 16-bit Windows platform,
Microsoft introduced a surprising number of changes to the mechanics
of the game. Some were clearly intentional, some were done through
ignorance or indifference, and others were simply bugs in the program.

The programs in WEP4 came pre-installed on many PC computers sold
during the 1990s, which is part of the reason for its widespread
popularity. A small but fanatically loyal community of adherents to
the game connected via a MSN chatroom (and later through the
internet). A few members of this community managed to decipher the
format of the MS game's data file, and John K. Elion subsequently
created a freeware level editor, called ChipEdit. As a result there
are now dozens of new level sets, created by fans of the game and all
freely available.

Atari discontinued support for the Lynx in 1994. When Epyx went under,
the rights to their games were purchased by Bridgestone Multimedia.
Responding to the success of "Chip's Challenge", Chuck Sommerville
created a sequel ("Chip's Challenge 2"). The sequel included the
original game as a proper subset, and Bridgestone holds the rights to
both games. Unfortunately, the company has not seen fit to actually
release "Chip's Challenge 2", and by now it is highly unlikely that
they ever will. Since Chuck Sommerville no longer has rights to either
game, and Microsoft no longer sells either of the Entertainment Packs,
"Chip's Challenge" is no longer available (except by purchasing a used
version, or obtaining an illegal copy of same).

In 2001, the author began writing "Tile World" with the intention of
recreating a version of the MS game for the Linux platform. At the
encouragement of Chuck Sommerville, this project was expanded to
include the goals of recreating the original Lynx game as well, and
also making the program work under MS Windows in addition to Linux.

.section Appendix: Notes on Nomenclature

"Chip's Challenge" has seen several incarnations. Each had its own
graphical rendering, and thus many of the objects in the game are
known by more than one name. For example, the four types of boots in
the MS version of the game were known as fire boots, flippers (for
water), skates (for ice), and suction boots (for force floors). In the
original Lynx version, however, they were not even boots -- the four
tools were fire shields, water shields, cleats, and magnets,
respectively.

Several of the creatures have seen a variety of names. The list of
creatures given in #Overview of the Game# corresponds to the MS
version of the game. In the original Lynx version, the paramecia were
centipedes instead. In still other versions of the game, gliders were
referred to as ghosts or sharks, fireballs were flames, and teeth were
called frogs. (You will also occasionally see bugs referred to as
bees, and walkers referred to as dumbbells.)

Finally, the thief tile was called a spy in the MS version.

None of this information is needed in order to play the game, but it
helps to explain the titles of some of the user-created levels.

.section Appendix: Layout of the Font Bitmap

The font used by the program is stored in a Windows bitmap file. The
bitmap uses three different colors of pixels to define the glyphs of
the font. The three pixel colors are used to indicate glyph pixels,
halftone pixels, and background pixels.

When the glyphs of the font are rendered by the program, the halftone
pixels will be displayed in the color that is halfway between the
background color and the foreground color. Thus the halftone pixels
are useful for doing simple anti-aliasing of the glyphs.

The pixel in the top-left corner must be the color of the glyph
pixels. The pixel immediately below this must be the color of the
background pixels. Any other pixel colors in the bitmap are taken as
halftone pixels. Note that the colors used in the bitmap do not affect
the actual colors used in rendering the font.

All glyphs must be of the same height, though the widths may vary
freely. The glyphs appear in rows, and are read in reading order: from
left-to-right, then top-to-bottom. Each row of glyphs includes an
extra line of pixels above it. In addition, there is an extra column
of pixels running down the left side of the bitmap. These pixel-wide
lines contain markers that locate the separation between individual
glyphs.

The left column of pixels will have one glyph-colored pixel per row of
glyphs in the bitmap. The height of each pixel in the left column
indicates the height of the row of pixels above each row of glyphs.
All other pixels in the left column will have the background color.

The glyphs in a given will be separated from each other by a single
column of pixels. This column will be indicated by a glyph-colored
pixel directly above it, in the row of pixels. All other pixels in the
rows will have the background color. There will also be a
glyph-colored pixel immediately after the last glyph in a row. (The
net result is that every glyph will have a glyph-colored pixel on
either side.) Each row can contain any number of glyphs; anything to
the right of the last glyph in a row is ignored.

The glyphs in the bitmap will correspond to the ISO-8859-1 characters
32 through 126 inclusive, followed by the characters 160 through 255
inclusive. (It is not possible to define glyphs for the characters 0
through 31 or for the characters 127 through 159.) The bitmap can
contain fewer glyphs; in such a case, the characters that are absent
will not be displayed by the program.

.section Appendix: Layout of the Tile Bitmap

There are three different formats that the tile image bitmap can use.
(The program automatically determines which one is being used by
examining the dimensions of the bitmap.) They are referred to here as
the small format, the large format, and the masked format.

The %masked format% is essentially the same one that is used by the
original MS program. In fact, anyone with a copy of the original
program and a resource editor can extract the bitmap from the Windows
executable and use it with Tile World directly. The tiles are laid out
in a 13x16 grid. The first four columns of the bitmap are:

.grid
l               l             l               l
Empty           Clone Block S Overlay Buffer  Wall SE
Wall            Clone Block E Thief           Clone Machine
IC Chip         Force Floor N Socket          Random Force
Water           Force Floor E Green Button    Water Splash
Fire            Force Floor W Red Button      Burned Chip
Hidden Wall (p) Exit          Toggle Wall     Bombed Chip
Wall N          Blue Door     Toggle Floor    Explosion
Wall W          Red Door      Brown Button    Disintegrate
Wall S          Green Door    Blue Button     Empty (unused)
Wall E          Yellow Door   Teleport        Exited Chip
Block           Ice Wall SE   Bomb            Extra Exit 1
Dirt            Ice Wall SW   Bear Trap       Extra Exit 2
Ice             Ice Wall NW   Hidden Wall (t) Chip Swimming N
Force Floor S   Ice Wall NE   Gravel          Chip Swimming W
Clone Block N   Blue Wall (f) Popup Wall      Chip Swimming S
Clone Block W   Blue Wall (r) Hint Button     Chip Swimming E

(See below for comments regarding the tile names.)

The next three columns contain the following tiles:

.grid
l             l             l
Bug N         Glider N      Paramecium N
Bug W         Glider W      Paramecium W
Bug S         Glider S      Paramecium S
Bug E         Glider E      Paramecium E
Fireball N    Teeth N       Blue Key
Fireball W    Teeth W       Red Key
Fireball S    Teeth S       Green Key
Fireball E    Teeth E       Yellow Key
Ball N        Walker N      Water Boots
Ball W        Walker W      Fire Boots
Ball S        Walker S      Ice Boots
Ball E        Walker E      Force Boots
Tank N        Blob N        Chip N
Tank W        Blob W        Chip W
Tank S        Blob S        Chip S
Tank E        Blob E        Chip E

Each of these tiles are drawn with an empty tile in the background.
The next three columns repeat the images of the previous three
columns, but with a pure white background instead. The last three
columns then have the "masks" for these images. The mask images are
monochrome, with black used for the background and white used for the
figure. When the program is displaying a creature, a key, or a pair of
boots, it uses a tile from columns 4-6 if the item is upon an empty
tile.  Otherwise, it uses the image from columns 7-9, coupled with the
mask from columns 10-12, to combine the image with the proper floor
tile image.

The %small format% is an abbreviated layout of the masked format. The
tiles are laid out in a 7x16 grid. The first four columns are the same
as with the masked format. The remaining three columns contain the
creatures, boots, and keys (again, as with the small format) with a
solid background of magenta pixels (RGB=255,0,255). When the bitmap is
read by Tile World, all magenta pixels in the will be made
transparent. (Magenta pixels in the first four columns will not be
altered.) If you wish to use magenta in any of these tiles (e.g., for
the balls), then you will have to use one of the other formats
instead.

The %large format% is the only format that permits inclusion of animated
tiles. This format has a less rigid layout. Tiles are arranged in rows
instead of columns. The tiles are extracted from the bitmap in reading
order -- scanning from left-to-right, top-to-bottom.  The rows do not
have to have a specific width.

A one-pixel-high horizontal line is above each row of tiles. The
pixels in this line indicate the divisions between tiles in the
row. There is also a one-pixel-wide vertical line at the left edge of
the bitmap, which is used to indicate the placement of the rows.

One color is used throughout the bitmap to indicate transparency.
This color can be magenta, or some other color. The program determines
which color is used to show transparency by reading the color of the
second pixel in the horizontal line above the first row -- pixel (1,0)
in x-y coordinates.

The vertical line on the left side of the bitmap has a non-transparent
pixel at the position of the horizonal lines above the tiles. All
other pixels in the vertical line must be transparent. (The
non-transparent pixels can be of different colors.) The horizontal
lines have a non-transparent pixel at the rightmost edge of each tile
image. (Note that the tile images are separated from each other by a
line of pixels vertically, but not horizontally.)

The first tile in the first row is the Empty tile. The Empty tile
cannot be animated, nor is it permitted to have any transparent
pixels.

The next 49 tiles in the bitmap are the following, in order:

.indent
Force Floor N; Force Floor W; Force Floor S; Force Floor E; Random
Force; Ice; Ice Wall NW; Ice Wall NE; Ice Wall SW; Ice Wall SE;
Gravel; Dirt; Water; Fire; Bomb; Bear Trap; Thief; Hint Button; Blue
Button; Green Button; Red Button; Brown Button; Teleport; Wall; Wall
N; Wall W; Wall S; Wall E; Wall SE; Blue Wall; Toggle Floor; Toggle
Wall; Popup Wall; Clone Machine; Red Door; Blue Door; Yellow Door;
Green Door; Socket; Exit; IC Chip; Red Key; Blue Key; Yellow Key;
Green Key; Ice Boots; Force Boots; Fire Boots; Water Boots.

(Note that there are no tile images for Hidden Walls. These tiles
always use the Empty tile image. Likewise, there is only a single tile
used to display a Blue Wall, whether the wall is real or fake.)

The tiles can be broken up across any number of rows, and each row can
be of different length.

Any of these tile images can have transparent pixels. Those that do
will have their transparent pixels replaced with the corresponding
pixels from the Empty tile image. Note that if the bitmap is intended
to be used under MS emulation, then the Keys and Boots need to be
rendered with transparent backgrounds.

These tiles may also have more than one image supplied for them. Those
that do will be animated under Lynx emulation; Tile World will loop
through the images in the sequence while the game is playing. (Under
MS emulation, only the first image in the sequence will be used.) In
this case, the horizontal line above the row will have only one
non-transparent pixel, placed at the rightmost edge of the last tile
in the sequence. (The tiles of a single animated sequence may NOT be
broken up across rows.)

The next 10 tiles following these are:

.indent
Extra Exit 1; Extra Exit 2; Burned Chip; Bombed Chip; Exited
Chip; Water Splash; Chip Swimming N; Chip Swimming W; Chip
Swimming S; Chip Swimming E.

These tiles are only used during the MS emulation. They cannot be
animated; each tile can only have a single image. (Transparent pixels
are permitted, however, and will be handled as before.) If the bitmap
is only intended for use under Lynx emulation, these tiles can be left
blank, but they still need to be present.

After these come the following 12 tiles:

.indent
Chip; Pushing Chip; Block; Tank; Ball; Glider; Fireball;
Walker; Blob; Teeth; Bug; Paramecium.

These tiles will usually have one of a set number of multiple images.
Note that some of the possible layouts require rows that are two tiles
high. Any given row in the bitmap is of a fixed height all the way
across, however. So any change of height between neighboring tile
images requires that a new row be started in the bitmap.

The possible "sub-layouts" of the images of these 12 tiles are:

.list
. 1x1: A single image. The lone image is used to display the creature,
regardless of its movement or orientation.
. 1x4: Four images in a single row, showing the creature moving N, W,
S, and E, respectively.
. 2x2: Four images as before, but arranged in a square. The top two
images show N and W movement, and S and E constitute the bottom row.
. 2x8: Sixteen images, giving four animated images per direction. The
top row contains the four N images followed by the four W images,
and the bottom row contains the four S images followed by the four E
images.
. 2x16: Sixteen images, but each image occupies two tiles' worth of
space. The leftmost 2x4 area contains the four animated images of
the creature moving N. Each image is two tiles high, and is drawn
across both tiles as the creature moves. (Note that the final image
will ideally be completely transparent in the bottom half.) The next
2x4 area has the four animated images of the creature moving S,
arranged as before. The right half contains the images of the
creature moving W and E. These images are a single tile high but two
tiles wide, with the sequence of four W images appearing above the
sequence of four E images.

Finally, the bitmap contains three more tile images:

.indent
Water Splash; Explosion; Disintegrate.

The images for these tiles can either be 1x1 or 3x3 in size. There
must be exactly twelve images for each.

The following notes clarify the meanings of the names used to identify
the tile images.

The ice wall tiles are identified by their open sides. Thus "Ice Wall
NW" indicates an ice tile with thin walls on the S and E sides.

The parenthetical parts of tile names distinguish between tiles that
are identical in appearance. Thus, "Blue Wall" is suffixed by "(f)" or
"(r)" to indicate "fake" or "real" walls.

The "Overlay Buffer" tile is used by the program as a place to build
up images made with one or more transparent tiles. Whatever is
actually placed here in the bitmap will only be visible if a level
containing this tile is displayed before it is ever used by the
program. Normally this tile contains a duplicate of the Empty tile
image.

The "Exited Chip" tile and the two "Extra Exit" tiles are used by the
original MS program to create the ending sequence shown after
completing one of the two final levels. The two "Extra Exit" tiles are
used with the main "Exit" tile to create an three-frame animated
sequence.

The "Empty (Unused)" tile in the first two formats indicates tiles
that are not used by the program, and normally appear the same as
Empty.

In the original MS program, the tiles marked "Explosion" and
"Disintegrate" are actually unused, and contain an Empty tile
image. These extra tiles only appear during Lynx emulation. (If your
masked format bitmap is only intended to be used under MS emulation,
these tiles can be left as Empty.) "Explosion" is displayed when a
bomb goes off; "Disintegrate" is displayed when Chip collides with
another creature.

The "Water Splash" tile is displayed by the MS game when Chip dies
from walking into a water square. The "Burned Chip" tile is displayed
by the MS game when Chip dies from walking into a fire square. The
"Bombed Chip" tile is not used by the original program unless it is
explicitly inserted in a level's map.

Note that the "Water Splash" tile appears twice in the large format.
The first occurrence is as a single tile used only for MS emulation,
and the second occurrence is an animation sequence used only under
Lynx emulation.
